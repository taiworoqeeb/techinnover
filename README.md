
# Basic E-Commerce System

## Project Overview and Objectives

This project is a backend API for a basic e-commerce system, designed to assess proficiency in using the NestJS framework. The system supports three types of users: unauthenticated users, authenticated users, and admins.

- **Unauthenticated Users**: Can view only approved products.
- **Authenticated Users**: Can manage their own products (create, update, delete).
- **Admins**: Can manage users (ban/unban) and have control over product approval. Only approved products will be visible to unauthenticated users.

The primary goals of this project are:

1. **User Management**: Implement user registration and authentication features. Provide role-based access control to differentiate between regular users and admins. Only admins can ban/unban users and manage all products.
2. **Product Management**: Allow users to manage their own products. Admins will have the ability to approve or disapprove products. Unauthenticated users will only see products that have been approved.
3. **API Documentation**: Provide thorough API documentation using Swagger, detailing all endpoints, request/response schemas, and usage guidelines.
4. **Security**: Implement proper authentication and role-based access control to secure endpoints. Ensure banned users cannot log in or interact with the system.

## Instructions for Setting Up the Development Environment

To set up the development environment, follow these steps:

### Prerequisites

- **Node.js**: Ensure you have Node.js installed (v14.x or higher).
- **NestJS CLI**: Install NestJS CLI globally by running:
    ```bash
    yarn global add @nestjs/cli
    ```
- **MongoDB**: Install MongoDB and ensure the service is running locally, or set up a connection to a cloud-based MongoDB service (e.g., MongoDB Atlas).

### Installation

1. **Clone the Repository**: Clone the project repository from GitHub:
    ```bash
    git clone https://github.com/taiworoqeeb/techinnover.git
    cd techinnover
    ```

2. **Install Dependencies**: Install the necessary packages using Yarn:
    ```bash
    yarn install
    ```

3. **Environment Variables**: Configure environment variables. Create a `.env` file in the project root based on the `.env.example` file provided in the repository. The following environment variables are required:

    ```plaintext
    DATABASE_URL=<your-mongodb-connection-string>
    JWT_SECRET=<your-jwt-secret>
    PORT=<port-number>
    APP_VERSION=<application-version>
    NODE_ENV=<node-environment>
    ```

    - Replace `<your-mongodb-connection-string>` with the URI for your MongoDB instance.
    - Replace `<your-jwt-secret>` with a secret key for JWT authentication.
    - Replace `<port-number>` with the desired port number for the server.
    - Replace `<application-version>` with the version number of the application (e.g., `1`).
    -  Replace `<node-environment>` with the application environment (e.g., `development` or `production`).

4. **Database Migration (if applicable)**: If there are specific migrations or initial data setup scripts, run them using:
    ```bash
    yarn migrate
    ```
    *Note: MongoDB typically does not require traditional migrations like SQL databases. Ensure collections and schemas are handled within the application logic.*

## How to Run the Application Locally

1. **Start the NestJS Development Server**: Use the following command to start the server:
    ```bash
    yarn start:dev
    ```

    This command will start the NestJS application in development mode. By default, it runs on `http://localhost:4000`.

2. **Access API Documentation**: Once the server is running, you can access the API documentation generated by Swagger. Open your web browser and navigate to:
    ```
    http://localhost:4000/doc
    ```

3. **Testing the API**: You can use tools like Postman or Insomnia to test the API endpoints. Refer to the Swagger documentation for details on available endpoints, required request bodies, and expected responses.

## Unit Testing

To ensure the functionality and reliability of the application, unit tests are included. The tests are written using Jest, which is the default testing framework for NestJS.

### Running Unit Tests

1. **Run All Tests**: Use the following command to run all unit tests:
    ```bash
    yarn test
    ```

2. **Run Tests with Watch Mode**: This mode will watch for changes and automatically rerun tests:
    ```bash
    yarn test:watch
    ```

3. **Run Test Coverage**: To generate a test coverage report, use:
    ```bash
    yarn test:cov
    ```

    This will provide a summary of which parts of your code are covered by tests.

### Writing Unit Tests

- Tests are located in the `tests` folder in the `src` directory.

